// import '../model/conversation.dart';
// import '../model/message.dart';
// import '../model/user_model.dart';
//
// abstract class IChatRepository {
//   Future<List<Conversation>> fetchInbox();
//   Future<List<Message>> fetchMessages(String conversationId, OdooUser peer);
//   Future<Message> sendMessage({
//     required String conversationId,
//     required String text,
//     required OdooUser sender,
//   });
// }
//

import 'package:http/http.dart' as http;

import '../model/conversation.dart';
import '../model/message.dart';
import '../model/user_model.dart';

abstract class IChatRepository {
  Future<List<Conversation>> fetchInbox();
  Future<List<Message>> fetchMessages(String conversationId, OdooUser peer);

  Future<Message> sendMessage({
    required String conversationId,
    required String text,
    required OdooUser sender,
    List<String>? attachmentIds,
  });

  Future<List<UploadedAttachment>> uploadAttachments({
    required String conversationId,
    required List<PickedAttachment> picked,
  });

  // NEW â€” to create or get a DM channel with a user
  Future<Conversation> getOrCreateDirectChannel({
    required int partnerId,
    required String partnerName,
  });
}


class UploadedAttachment {
  final String id;
  final String name;
  final String url;        // if backend returns it
  final String mimeType;   // optional
  final int size;          // optional
  final bool isImage;      // optional hint for UI
  UploadedAttachment({
    required this.id,
    required this.name,
    this.url = '',
    this.mimeType = '',
    this.size = 0,
    this.isImage = false,
  });


}
